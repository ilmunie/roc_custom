<?xml version="1.0"?>
<odoo>
    <record id="view_picking_form_stock_custom" model="ir.ui.view">
        <field name="name">view.picking.form.analytic.inherit</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.view_picking_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='origin']" position="after">
                <label for="see_invoice_number" string="N째 Factura" attrs="{'invisible':[('picking_type_code','!=','incoming')]}"/>
                <div class="o_row" attrs="{'invisible':[('picking_type_code','!=','incoming')]}">
                    <field name="see_invoice_number" attrs="{'readonly':[('state','in',('done','cancel'))]}"/>
                    <field class="oe_inline" name="invoice_number" attrs="{'readonly':[('state','in',('done','cancel'))],'invisible':[('see_invoice_number','=',False)],'required':[('picking_type_code','=','supplier'),('shipment_number','=',False)]}" />
                </div>
                <label for="see_shipment_number" string="N째 Remito" attrs="{'invisible':[('picking_type_code','!=','incoming')]}"/>
                <div class="o_row" >
                    <field name="see_shipment_number" attrs="{'invisible':[('picking_type_code','!=','incoming')],'readonly':[('state','in',('done','cancel'))]}" />
                    <field class="oe_inline" name="shipment_number" attrs="{'readonly':[('state','in',('done','cancel'))],'invisible':[('see_shipment_number','=',False)],'required':[('picking_type_code','=','supplier'),('invoice_number','=',False)]}" />
                </div>
            </xpath>
        </field>
    </record>
    <record id="view_picking_inherit_tree" model="ir.ui.view">
		<field name="name">stock.picking.inherit.tree</field>
		<field name="model">stock.picking</field>
		<field name="inherit_id" ref="stock.vpicktree"/>
		<field name="arch" type="xml">
            <field name="products_availability" position="attributes">
                <attribute name="optional">show</attribute>
            </field>
            <field name="date_done" position="attributes">
                <attribute name="optional">show</attribute>
            </field>
            <field name="date_deadline" position="attributes">
                <attribute name="optional">show</attribute>
            </field>
            <field name="backorder_id" position="attributes">
                <attribute name="optional">show</attribute>
            </field>
            <field name="picking_type_id" position="attributes">
                <attribute name="optional">show</attribute>
            </field>
            <field name="batch_id" position="replace">
                <field name="activity_ids" widget="list_activity"/>
            </field>


		</field>
    </record>
    <record id="view_picking_search_inherit_form" model="ir.ui.view">
		<field name="name">stock.picking.search.inherit</field>
		<field name="model">stock.picking</field>
		<field name="inherit_id" ref="stock.view_picking_internal_search"/>
		<field name="arch" type="xml">


            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="invoice_number" string="N째 Factura" />
                <field name="shipment_number" string="N째 Remito" />
                <field name="note" string="Nota"/>
            </xpath>

            <xpath expr="//group[last()]" position="inside">
                <separator/>
                <filter string="Fecha efectiva" name="date_done" domain="[('date_done','!=',False)]" context="{'group_by':'date_done'}"/>
            </xpath>

		</field>
    </record>
</odoo>